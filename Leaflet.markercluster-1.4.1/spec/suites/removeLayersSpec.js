describe("removeLayers",function(){var e,r,a,t;beforeEach(function(){t=sinon.useFakeTimers(),(e=document.createElement("div")).style.width="200px",e.style.height="200px",document.body.appendChild(e),(r=L.map(e,{maxZoom:18,trackResize:!1})).fitBounds(new L.LatLngBounds([[1,1],[2,2]]))}),afterEach(function(){a instanceof L.MarkerClusterGroup&&(a.clearLayers(),r.removeLayer(a)),r.remove(),e.remove(),t.restore(),e=r=a=t=null}),it("removes all the layer given to it",function(){a=new L.MarkerClusterGroup;var e=[new L.Marker([1.5,1.5]),new L.Marker([1.5,1.5]),new L.Marker([1.5,1.5])];r.addLayer(a),a.addLayers(e),a.removeLayers(e),expect(a.hasLayer(e[0])).to.be(!1),expect(a.hasLayer(e[1])).to.be(!1),expect(a.hasLayer(e[2])).to.be(!1),expect(a.getLayers().length).to.be(0)}),it("removes all the layer given to it even though they move",function(){a=new L.MarkerClusterGroup;var e=[new L.Marker([10,10]),new L.Marker([20,20]),new L.Marker([30,30])],t=e.length;r.addLayer(a),a.addLayers(e),e.forEach(function(e){e.setLatLng([1.5,1.5]),a.removeLayer(e),expect(a.getLayers().length).to.be(t-1),a.addLayer(e),expect(a.getLayers().length).to.be(t)}),expect(a.getLayers().length).to.be(t)}),it("removes all the layer given to it even if the group is not on the map",function(){a=new L.MarkerClusterGroup;var e=[new L.Marker([1.5,1.5]),new L.Marker([1.5,1.5]),new L.Marker([1.5,1.5])];r.addLayer(a),a.addLayers(e),r.removeLayer(a),a.removeLayers(e),r.addLayer(a),expect(a.hasLayer(e[0])).to.be(!1),expect(a.hasLayer(e[1])).to.be(!1),expect(a.hasLayer(e[2])).to.be(!1),expect(a.getLayers().length).to.be(0)}),it("doesnt break if we are spiderfied",function(){a=new L.MarkerClusterGroup;var e=[new L.Marker([1.5,1.5]),new L.Marker([1.5,1.5]),new L.Marker([1.5,1.5])];r.addLayer(a),a.addLayers(e),e[0].__parent.spiderfy(),t.tick(200),a.removeLayers(e),expect(a.hasLayer(e[0])).to.be(!1),expect(a.hasLayer(e[1])).to.be(!1),expect(a.hasLayer(e[2])).to.be(!1),expect(a.getLayers().length).to.be(0),a.on("spiderfied",function(){expect(a._spiderfied).to.be(null)})}),it("handles nested Layer Groups",function(){a=new L.MarkerClusterGroup;var e=new L.Marker([1.5,1.5]),t=new L.Marker([1.5,1.5]),o=new L.Marker([1.5,1.5]);r.addLayer(a),a.addLayers([e,t,o]),expect(a.hasLayer(e)).to.be(!0),expect(a.hasLayer(t)).to.be(!0),expect(a.hasLayer(o)).to.be(!0),a.removeLayers([e,new L.LayerGroup([t,new L.LayerGroup([o])])]),expect(a.hasLayer(e)).to.be(!1),expect(a.hasLayer(t)).to.be(!1),expect(a.hasLayer(o)).to.be(!1),expect(a.getLayers().length).to.be(0)}),it("chunked loading zoom out",function(){var e=[];a=new L.MarkerClusterGroup({chunkedLoading:!0,chunkProgress:function(){r.zoomOut(),a.removeLayers(e)}});for(var t=1;t<1e3;t++)e.push(new L.Marker([1+1e-4*t,1+1e-4*t]));r.addLayer(a),a.addLayers(e)})});