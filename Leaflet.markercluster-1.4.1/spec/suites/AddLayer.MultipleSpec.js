describe("addLayer adding multiple markers",function(){var e,a,r;beforeEach(function(){r=sinon.useFakeTimers(),(a=document.createElement("div")).style.width="200px",a.style.height="200px",document.body.appendChild(a),(e=L.map(a,{maxZoom:18,trackResize:!1})).fitBounds(new L.LatLngBounds([[1,1],[2,2]]))}),afterEach(function(){e.remove(),document.body.removeChild(a),r.restore(),e=a=r=null}),it("creates a cluster when 2 overlapping markers are added before the group is added to the map",function(){var a=new L.MarkerClusterGroup,r=new L.Marker([1.5,1.5]),n=new L.Marker([1.5,1.5]);a.addLayer(r),a.addLayer(n),e.addLayer(a),expect(r._icon).to.be(undefined),expect(n._icon).to.be(undefined),expect(e._panes.markerPane.childNodes.length).to.be(1)}),it("creates a cluster when 2 overlapping markers are added after the group is added to the map",function(){var a=new L.MarkerClusterGroup,r=new L.Marker([1.5,1.5]),n=new L.Marker([1.5,1.5]);e.addLayer(a),a.addLayer(r),a.addLayer(n),expect(r._icon).to.be(null),expect(n._icon).to.be(undefined),expect(e._panes.markerPane.childNodes.length).to.be(1)}),it("creates a cluster with an animation when 2 overlapping markers are added after the group is added to the map",function(){var a=new L.MarkerClusterGroup({animateAddingMarkers:!0}),n=new L.Marker([1.5,1.5]),d=new L.Marker([1.5,1.5]);e.addLayer(a),a.addLayer(n),a.addLayer(d),expect(n._icon.parentNode).to.be(e._panes.markerPane),expect(d._icon.parentNode).to.be(e._panes.markerPane),expect(e._panes.markerPane.childNodes.length).to.be(3),r.tick(1e3),expect(n._icon).to.be(null),expect(d._icon).to.be(null),expect(e._panes.markerPane.childNodes.length).to.be(1)}),it("creates a cluster and marker when 2 overlapping markers and one non-overlapping are added before the group is added to the map",function(){var a=new L.MarkerClusterGroup,r=new L.Marker([1.5,1.5]),n=new L.Marker([1.5,1.5]),d=new L.Marker([3,1.5]);a.addLayer(r),a.addLayer(n),a.addLayer(d),e.addLayer(a),expect(r._icon).to.be(undefined),expect(n._icon).to.be(undefined),expect(d._icon.parentNode).to.be(e._panes.markerPane),expect(e._panes.markerPane.childNodes.length).to.be(2)}),it("creates a cluster and marker when 2 overlapping markers and one non-overlapping are added after the group is added to the map",function(){var a=new L.MarkerClusterGroup,r=new L.Marker([1.5,1.5]),n=new L.Marker([1.5,1.5]),d=new L.Marker([3,1.5]);e.addLayer(a),a.addLayer(r),a.addLayer(n),a.addLayer(d),expect(r._icon).to.be(null),expect(n._icon).to.be(undefined),expect(d._icon.parentNode).to.be(e._panes.markerPane),expect(e._panes.markerPane.childNodes.length).to.be(2)})});