describe("addLayer adding a single marker",function(){var e,a,r;beforeEach(function(){(e=document.createElement("div")).style.width="200px",e.style.height="200px",document.body.appendChild(e),(a=L.map(e,{maxZoom:18,trackResize:!1})).fitBounds(new L.LatLngBounds([[1,1],[2,2]]))}),afterEach(function(){r instanceof L.MarkerClusterGroup&&(r.clearLayers(),a.removeLayer(r)),a.remove(),e.remove(),e=a=r=null}),it("appears when added to the group before the group is added to the map",function(){r=new L.MarkerClusterGroup;var e=new L.Marker([1.5,1.5]);r.addLayer(e),a.addLayer(r),expect(e._icon).to.not.be(undefined),expect(e._icon.parentNode).to.be(a._panes.markerPane)}),it("appears when added to the group after the group is added to the map",function(){r=new L.MarkerClusterGroup;var e=new L.Marker([1.5,1.5]);a.addLayer(r),r.addLayer(e),expect(e._icon).to.not.be(undefined),expect(e._icon.parentNode).to.be(a._panes.markerPane)}),it("appears (using animations) when added after the group is added to the map",function(){r=new L.MarkerClusterGroup({animateAddingMarkers:!0});var e=new L.Marker([1.5,1.5]);a.addLayer(r),r.addLayer(e),expect(e._icon).to.not.be(undefined),expect(e._icon.parentNode).to.be(a._panes.markerPane)}),it("does not appear when too far away when added before the group is added to the map",function(){r=new L.MarkerClusterGroup;var e=new L.Marker([3.5,1.5]);r.addLayer(e),a.addLayer(r),expect(e._icon).to.be(undefined)}),it("does not appear when too far away when added after the group is added to the map",function(){r=new L.MarkerClusterGroup;var e=new L.Marker([3.5,1.5]);a.addLayer(r),r.addLayer(e),expect(e._icon).to.be(undefined)}),it("passes control to addLayers when marker is a Layer Group",function(){r=new L.MarkerClusterGroup;var e=new L.Marker([1.5,1.5]),n=new L.Marker([1.5,1.5]),t=new L.LayerGroup([e,n]);a.addLayer(r),r.addLayer(t),expect(r._topClusterLevel.getChildCount()).to.equal(2),expect(e._icon).to.be(undefined),expect(n._icon).to.be(undefined),expect(a._panes.markerPane.childNodes.length).to.be(1)})});